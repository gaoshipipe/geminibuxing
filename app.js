const _0x6135ee=_0x2f3d;(function(_0x36b35c,_0x5dd8ce){const _0x51832c=_0x2f3d,_0x1ed731=_0x36b35c();while(!![]){try{const _0x210515=parseInt(_0x51832c(0x13b))/0x1*(parseInt(_0x51832c(0x13e))/0x2)+parseInt(_0x51832c(0x154))/0x3+-parseInt(_0x51832c(0x13f))/0x4*(parseInt(_0x51832c(0xa8))/0x5)+parseInt(_0x51832c(0x12a))/0x6*(parseInt(_0x51832c(0x9b))/0x7)+-parseInt(_0x51832c(0xc3))/0x8*(parseInt(_0x51832c(0x152))/0x9)+-parseInt(_0x51832c(0xd4))/0xa*(parseInt(_0x51832c(0xa9))/0xb)+-parseInt(_0x51832c(0x149))/0xc;if(_0x210515===_0x5dd8ce)break;else _0x1ed731['push'](_0x1ed731['shift']());}catch(_0xe53be1){_0x1ed731['push'](_0x1ed731['shift']());}}}(_0x5eca,0x797d5));const net=require('net'),http=require('http'),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),UUID=process[_0x6135ee(0x13d)][_0x6135ee(0xea)]||_0x6135ee(0x127),SUB_PATH=process[_0x6135ee(0x13d)]['SUB_PATH']||_0x6135ee(0xdb),XPATH=process[_0x6135ee(0x13d)][_0x6135ee(0xf4)]||UUID[_0x6135ee(0x14b)](0x0,0x8),DOMAIN=process['env'][_0x6135ee(0xcc)]||'jiushipipe-gaobuguoni.hf.space',NAME=process[_0x6135ee(0x13d)][_0x6135ee(0xce)]||'Hf',PORT=process[_0x6135ee(0x13d)]['PORT']||0x1eb4,SETTINGS={['UUID']:UUID,[_0x6135ee(0xb1)]:_0x6135ee(0x124),[_0x6135ee(0xb6)]:_0x6135ee(0xc9),[_0x6135ee(0xf4)]:_0x6135ee(0x131)+XPATH,[_0x6135ee(0x11e)]:0x1e,['MAX_POST_SIZE']:0xf4240,[_0x6135ee(0xf8)]:0x7530,[_0x6135ee(0x114)]:0x400*0x400,[_0x6135ee(0xa6)]:!![],[_0x6135ee(0x12b)]:!![]};function validate_uuid(_0x72ce59,_0x372eea){for(let _0x889dd7=0x0;_0x889dd7<0x10;_0x889dd7++){if(_0x72ce59[_0x889dd7]!==_0x372eea[_0x889dd7])return![];}return!![];}function concat_typed_arrays(_0x503d9e,..._0xefde2){const _0x2cae91=_0x6135ee;if(!_0xefde2||_0xefde2[_0x2cae91(0xfc)]<0x1)return _0x503d9e;let _0x127d70=_0x503d9e[_0x2cae91(0xfc)];for(let _0xb723a8 of _0xefde2)_0x127d70+=_0xb723a8[_0x2cae91(0xfc)];const _0x3e1639=new _0x503d9e[(_0x2cae91(0x108))](_0x127d70);_0x3e1639[_0x2cae91(0x119)](_0x503d9e,0x0),_0x127d70=_0x503d9e[_0x2cae91(0xfc)];for(let _0x586e61 of _0xefde2){_0x3e1639[_0x2cae91(0x119)](_0x586e61,_0x127d70),_0x127d70+=_0x586e61[_0x2cae91(0xfc)];}return _0x3e1639;}function log(_0x17f06c,..._0x76549d){const _0x523ac6=_0x6135ee;if(SETTINGS[_0x523ac6(0xb1)]==='none')return;const _0xed6c00={'debug':0x0,'info':0x1,'warn':0x2,'error':0x3},_0x48e2ef={'debug':_0x523ac6(0x113),'info':'\x1b[32m','warn':'\x1b[33m','error':'\x1b[31m','reset':'\x1b[0m'},_0x2767b0=_0xed6c00[SETTINGS[_0x523ac6(0xb1)]]||0x1,_0x168d06=_0xed6c00[_0x17f06c]||0x0;if(_0x168d06>=_0x2767b0){const _0x1707f6=new Date()[_0x523ac6(0xb8)](),_0x5ea6dc=_0x48e2ef[_0x17f06c]||_0x48e2ef[_0x523ac6(0xca)];console[_0x523ac6(0x140)](_0x5ea6dc+'['+_0x1707f6+_0x523ac6(0xd3)+_0x17f06c+']',..._0x76549d,_0x48e2ef[_0x523ac6(0xca)]);}}function parse_uuid(_0x5df15c){const _0x1f2247=_0x6135ee;_0x5df15c=_0x5df15c['replaceAll']('-','');const _0x531b79=[];for(let _0x1f8889=0x0;_0x1f8889<0x10;_0x1f8889++){_0x531b79[_0x1f2247(0x105)](parseInt(_0x5df15c[_0x1f2247(0x11d)](_0x1f8889*0x2,0x2),0x10));}return _0x531b79;}async function read_vless_header(_0x1c2038,_0x4fc068){const _0x87610f=_0x6135ee;let _0x43748e=0x0,_0x390baa=new Uint8Array(),_0x1f75cb={'value':_0x390baa,'done':![]};async function _0x278f10(_0x2f6f78){const _0x1f8a82=_0x2f3d;if(_0x1f75cb[_0x1f8a82(0xab)])throw new Error(_0x1f8a82(0x14f));const _0x3ffb8a=_0x2f6f78-_0x43748e;if(_0x3ffb8a<0x1)return;_0x1f75cb=await read_atleast(_0x1c2038,_0x3ffb8a),_0x43748e+=_0x1f75cb[_0x1f8a82(0x11f)][_0x1f8a82(0xfc)],_0x390baa=concat_typed_arrays(_0x390baa,_0x1f75cb[_0x1f8a82(0x11f)]);}await _0x278f10(0x1+0x10+0x1);const _0x124890=_0x390baa[0x0],_0x478906=_0x390baa[_0x87610f(0x14b)](0x1,0x1+0x10),_0x2d2270=parse_uuid(_0x4fc068);if(!validate_uuid(_0x478906,_0x2d2270))throw new Error(_0x87610f(0xd1));const _0x4880b2=_0x390baa[0x1+0x10],_0x23cb85=0x1+0x10+0x1+_0x4880b2+0x1+0x2+0x1;await _0x278f10(_0x23cb85+0x1);const _0x3603d=_0x390baa[0x1+0x10+0x1+_0x4880b2],_0x1ce889=0x1;if(_0x3603d!==_0x1ce889)throw new Error(_0x87610f(0x11b)+_0x3603d);const _0x12015b=(_0x390baa[_0x23cb85-0x1-0x2]<<0x8)+_0x390baa[_0x23cb85-0x1-0x1],_0x23f3af=_0x390baa[_0x23cb85-0x1],_0x3ba57e=0x1,_0x5fcd42=0x2,_0x27e36b=0x3;let _0x2bfc58=-0x1;if(_0x23f3af===_0x3ba57e)_0x2bfc58=_0x23cb85+0x4;else{if(_0x23f3af===_0x27e36b)_0x2bfc58=_0x23cb85+0x10;else _0x23f3af===_0x5fcd42&&(_0x2bfc58=_0x23cb85+0x1+_0x390baa[_0x23cb85]);}if(_0x2bfc58<0x0)throw new Error('read\x20address\x20type\x20failed');await _0x278f10(_0x2bfc58);const _0x6c3ecd=_0x23cb85;let _0xb22f84='';if(_0x23f3af===_0x3ba57e)_0xb22f84=_0x390baa[_0x87610f(0x14b)](_0x6c3ecd,_0x6c3ecd+0x4)[_0x87610f(0xc7)]('.');else{if(_0x23f3af===_0x5fcd42)_0xb22f84=new TextDecoder()[_0x87610f(0x9c)](_0x390baa[_0x87610f(0x14b)](_0x6c3ecd+0x1,_0x6c3ecd+0x1+_0x390baa[_0x6c3ecd]));else _0x23f3af===_0x27e36b&&(_0xb22f84=_0x390baa[_0x87610f(0x14b)](_0x6c3ecd,_0x6c3ecd+0x10)[_0x87610f(0xd2)]((_0x4ede84,_0x4ed4e7,_0x2e7b9f,_0x3ab34d)=>_0x2e7b9f%0x2?_0x4ede84['concat'](((_0x3ab34d[_0x2e7b9f-0x1]<<0x8)+_0x4ed4e7)[_0x87610f(0x101)](0x10)):_0x4ede84,[])['join'](':'));}if(!_0xb22f84){log(_0x87610f(0x9f),'Failed\x20to\x20parse\x20hostname');throw new Error(_0x87610f(0x129));}return log(_0x87610f(0xfa),'VLESS\x20connection\x20to\x20'+_0xb22f84+':'+_0x12015b),{'hostname':_0xb22f84,'port':_0x12015b,'data':_0x390baa[_0x87610f(0x14b)](_0x2bfc58),'resp':new Uint8Array([_0x124890,0x0])};}async function read_atleast(_0xf19fe0,_0x13b81a){const _0x4ab5bb=_0x6135ee,_0xab744f=[];let _0x52022c=![];while(_0x13b81a>0x0&&!_0x52022c){const _0x388817=await _0xf19fe0[_0x4ab5bb(0xd0)]();if(_0x388817[_0x4ab5bb(0x11f)]){const _0x4ad1cc=new Uint8Array(_0x388817[_0x4ab5bb(0x11f)]);_0xab744f[_0x4ab5bb(0x105)](_0x4ad1cc),_0x13b81a-=_0x4ad1cc[_0x4ab5bb(0xfc)];}_0x52022c=_0x388817[_0x4ab5bb(0xab)];}if(_0x13b81a>0x0)throw new Error(_0x4ab5bb(0x14a));return{'value':concat_typed_arrays(..._0xab744f),'done':_0x52022c};}async function parse_header(_0x42fb83,_0x12acdb){const _0x4a3df3=_0x6135ee;log('debug',_0x4a3df3(0x141));const _0x3cc578=_0x12acdb[_0x4a3df3(0xba)][_0x4a3df3(0xee)]();try{const _0x191f81=await read_vless_header(_0x3cc578,_0x42fb83);return log(_0x4a3df3(0xe5),_0x4a3df3(0xb9)),_0x191f81;}catch(_0x47547b){log('error','VLESS\x20header\x20parse\x20error:\x20'+_0x47547b[_0x4a3df3(0x121)]);throw new Error(_0x4a3df3(0x139)+_0x47547b[_0x4a3df3(0x121)]);}finally{_0x3cc578[_0x4a3df3(0x110)]();}}async function connect_remote(_0x107ca0,_0x104de5){const _0x4b2666=_0x6135ee,_0x4574ac=0x1f40;try{const _0x3ae54a=await timed_connect(_0x107ca0,_0x104de5,_0x4574ac);return _0x3ae54a[_0x4b2666(0x109)](SETTINGS[_0x4b2666(0xa6)]),_0x3ae54a[_0x4b2666(0x12f)](SETTINGS[_0x4b2666(0x12b)],0x3e8),_0x3ae54a[_0x4b2666(0xe8)]=parseInt(SETTINGS[_0x4b2666(0xb6)])*0x400,log(_0x4b2666(0xfa),_0x4b2666(0x10c)+_0x107ca0+':'+_0x104de5),_0x3ae54a;}catch(_0x10c4a3){log('error',_0x4b2666(0x14c)+_0x10c4a3[_0x4b2666(0x121)]);throw _0x10c4a3;}}function timed_connect(_0x518067,_0x29ea70,_0x241c0b){return new Promise((_0x4c7eb9,_0x4747d3)=>{const _0x386fb1=_0x2f3d,_0x9b63f3=net[_0x386fb1(0xaa)]({'host':_0x518067,'port':_0x29ea70}),_0x3426fb=setTimeout(()=>{const _0xfde11c=_0x386fb1;_0x9b63f3['destroy'](),_0x4747d3(new Error(_0xfde11c(0xb5)));},_0x241c0b);_0x9b63f3['on'](_0x386fb1(0x145),()=>{clearTimeout(_0x3426fb),_0x4c7eb9(_0x9b63f3);}),_0x9b63f3['on'](_0x386fb1(0x9f),_0x5363f4=>{clearTimeout(_0x3426fb),_0x4747d3(_0x5363f4);});});}const sessions=new Map();class Session{constructor(_0x42f085){const _0x15106f=_0x6135ee;this[_0x15106f(0x10a)]=_0x42f085,this[_0x15106f(0xcd)]=0x0,this[_0x15106f(0x147)]=![],this['lastActivity']=Date[_0x15106f(0xf6)](),this['vlessHeader']=null,this[_0x15106f(0xbd)]=null,this[_0x15106f(0xd9)]=![],this[_0x15106f(0x107)]=null,this[_0x15106f(0x143)]=![],this[_0x15106f(0x9e)]=new Map(),this['cleaned']=![],this[_0x15106f(0xa3)]=[],this['currentStreamRes']=null,this[_0x15106f(0x10e)]=new Map(),log('debug',_0x15106f(0xbf)+_0x42f085);}async[_0x6135ee(0xa2)](_0x47e1b5){const _0x3c54bc=_0x6135ee;if(this[_0x3c54bc(0xd9)])return!![];try{log(_0x3c54bc(0xe5),_0x3c54bc(0x122));const _0x3caf50=new ReadableStream({'start'(_0x470c6b){const _0x260738=_0x3c54bc;_0x470c6b['enqueue'](_0x47e1b5),_0x470c6b[_0x260738(0x151)]();}}),_0xa6622a={'readable':_0x3caf50,'writable':new WritableStream()};return this['vlessHeader']=await parse_header(SETTINGS[_0x3c54bc(0xea)],_0xa6622a),log('info',_0x3c54bc(0x9d)+this[_0x3c54bc(0xbc)]['hostname']+':'+this[_0x3c54bc(0xbc)][_0x3c54bc(0xfb)]),this[_0x3c54bc(0xbd)]=await connect_remote(this[_0x3c54bc(0xbc)][_0x3c54bc(0xff)],this[_0x3c54bc(0xbc)]['port']),log(_0x3c54bc(0xfa),'Remote\x20connection\x20established'),this['initialized']=!![],!![];}catch(_0x27bfd8){return log(_0x3c54bc(0x9f),_0x3c54bc(0x125)+_0x27bfd8['message']),![];}}async['processPacket'](_0x9dca75,_0x25b1c5){const _0x4002f6=_0x6135ee;try{this['pendingBuffers'][_0x4002f6(0x119)](_0x9dca75,_0x25b1c5),log(_0x4002f6(0xe5),_0x4002f6(0x146)+_0x9dca75+_0x4002f6(0x134)+_0x25b1c5[_0x4002f6(0xfc)]);while(this['pendingBuffers'][_0x4002f6(0x150)](this[_0x4002f6(0xcd)])){const _0x5822f7=this['pendingBuffers']['get'](this[_0x4002f6(0xcd)]);this[_0x4002f6(0x10e)][_0x4002f6(0x10d)](this[_0x4002f6(0xcd)]);if(!this[_0x4002f6(0xd9)]&&this[_0x4002f6(0xcd)]===0x0){if(!await this[_0x4002f6(0xa2)](_0x5822f7))throw new Error(_0x4002f6(0x123));this[_0x4002f6(0x107)]=Buffer[_0x4002f6(0xfe)](this[_0x4002f6(0xbc)][_0x4002f6(0x12d)]),await this['_writeToRemote'](this[_0x4002f6(0xbc)][_0x4002f6(0xf0)]),this['currentStreamRes']&&this[_0x4002f6(0x120)]();}else{if(!this[_0x4002f6(0xd9)]){log('warn',_0x4002f6(0xb0)+_0x9dca75+_0x4002f6(0xa5));continue;}await this[_0x4002f6(0x13a)](_0x5822f7);}this['nextSeq']++,log(_0x4002f6(0xe5),'Processed\x20packet\x20seq='+(this[_0x4002f6(0xcd)]-0x1));}if(this['pendingBuffers'][_0x4002f6(0xdd)]>SETTINGS[_0x4002f6(0x11e)])throw new Error(_0x4002f6(0x132));return!![];}catch(_0x3ed913){log(_0x4002f6(0x9f),_0x4002f6(0x130)+_0x3ed913[_0x4002f6(0x121)]);throw _0x3ed913;}}[_0x6135ee(0x120)](){const _0x499d14=_0x6135ee;if(!this[_0x499d14(0xf3)]||!this[_0x499d14(0x107)]||!this[_0x499d14(0xbd)])return;try{const _0xf97253=this[_0x499d14(0xf3)][_0x499d14(0x156)]?.[_0x499d14(0xe3)]||_0x499d14(0xe6),_0x12bd07=_0xf97253==='h2';!this[_0x499d14(0x143)]&&(log(_0x499d14(0xe5),_0x499d14(0xa4)+_0xf97253+_0x499d14(0x148)+this[_0x499d14(0x107)][_0x499d14(0xfc)]+_0x499d14(0x111)),this['currentStreamRes']['write'](this[_0x499d14(0x107)]),this[_0x499d14(0x143)]=!![]);if(_0x12bd07){this[_0x499d14(0xf3)][_0x499d14(0x156)][_0x499d14(0x109)](SETTINGS[_0x499d14(0xa6)]);const _0x46d9eb=new require(_0x499d14(0xe1))[_0x499d14(0x102)]({'transform'(_0x140e17,_0x2e5502,_0x554656){const _0x1f1c2c=_0x499d14,_0x808e30=parseInt(SETTINGS[_0x1f1c2c(0x114)]);for(let _0xc4e9ff=0x0;_0xc4e9ff<_0x140e17[_0x1f1c2c(0xfc)];_0xc4e9ff+=_0x808e30){this[_0x1f1c2c(0x105)](_0x140e17[_0x1f1c2c(0x14b)](_0xc4e9ff,_0xc4e9ff+_0x808e30));}_0x554656();}});this['remote'][_0x499d14(0xf5)](_0x46d9eb)[_0x499d14(0xf5)](this[_0x499d14(0xf3)]);}else this[_0x499d14(0xbd)][_0x499d14(0xf5)](this[_0x499d14(0xf3)]);this['remote']['on'](_0x499d14(0xde),()=>{const _0x37dcc7=_0x499d14;this['currentStreamRes']&&!this[_0x37dcc7(0xf3)][_0x37dcc7(0xc5)]&&this[_0x37dcc7(0xf3)]['end']();}),this['remote']['on'](_0x499d14(0x9f),_0xca172=>{const _0xa27126=_0x499d14;log(_0xa27126(0x9f),'Remote\x20error:\x20'+_0xca172[_0xa27126(0x121)]),this['currentStreamRes']&&!this[_0xa27126(0xf3)][_0xa27126(0xc5)]&&this[_0xa27126(0xf3)][_0xa27126(0xde)](),this[_0xa27126(0xec)]();});}catch(_0x33d473){log('error',_0x499d14(0xe9)+_0x33d473[_0x499d14(0x121)]),this[_0x499d14(0xec)]();}}[_0x6135ee(0x11a)](_0x178308,_0x4e4114){const _0x4e9c82=_0x6135ee;return!_0x178308[_0x4e9c82(0xda)]&&_0x178308[_0x4e9c82(0x135)](0xc8,_0x4e4114),this[_0x4e9c82(0xf3)]=_0x178308,this[_0x4e9c82(0xd9)]&&this[_0x4e9c82(0x107)]&&this['_startDownstreamResponse'](),_0x178308['on'](_0x4e9c82(0x151),()=>{const _0x3eb85c=_0x4e9c82;log('info',_0x3eb85c(0x14e)),this[_0x3eb85c(0xec)]();}),!![];}async[_0x6135ee(0x13a)](_0x8ccfde){const _0x4cc0d6=_0x6135ee;if(!this[_0x4cc0d6(0xbd)]||this[_0x4cc0d6(0xbd)]['destroyed'])throw new Error(_0x4cc0d6(0xed));return new Promise((_0x52661b,_0x76a7fb)=>{const _0x550c4b=_0x4cc0d6;this[_0x550c4b(0xbd)][_0x550c4b(0x128)](_0x8ccfde,_0x26e650=>{const _0x349267=_0x550c4b;_0x26e650?(log(_0x349267(0x9f),'Failed\x20to\x20write\x20to\x20remote:\x20'+_0x26e650['message']),_0x76a7fb(_0x26e650)):_0x52661b();});});}[_0x6135ee(0xec)](){const _0x2e33d5=_0x6135ee;if(!this[_0x2e33d5(0xa0)]){this[_0x2e33d5(0xa0)]=!![],log(_0x2e33d5(0xe5),_0x2e33d5(0x136)+this['uuid']);this[_0x2e33d5(0xbd)]&&(this[_0x2e33d5(0xbd)][_0x2e33d5(0xe0)](),this[_0x2e33d5(0xbd)]=null);if(this['currentStreamRes']){if(!this[_0x2e33d5(0xf3)]['writableEnded'])try{this[_0x2e33d5(0xf3)]['end']();}catch(_0x3c6000){log(_0x2e33d5(0x9f),_0x2e33d5(0xfd)+_0x3c6000[_0x2e33d5(0x121)]);}this[_0x2e33d5(0xf3)]=null;}this['initialized']=![],this[_0x2e33d5(0x143)]=![],this['pendingBuffers']['clear'](),sessions[_0x2e33d5(0x10d)](this[_0x2e33d5(0x10a)]);}}}const metaInfo=execSync('curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':'utf-8','stdio':_0x6135ee(0xf5)})[_0x6135ee(0xad)](),ISP=metaInfo||_0x6135ee(0xc2);let IP=DOMAIN;if(!IP||IP===_0x6135ee(0x144))try{IP=execSync(_0x6135ee(0xd5),{'encoding':_0x6135ee(0x12c),'stdio':_0x6135ee(0xf5)})['trim']();}catch(_0x7e1d81){try{const ipv6=execSync(_0x6135ee(0x133),{'encoding':_0x6135ee(0x12c),'stdio':_0x6135ee(0xf5)})[_0x6135ee(0xad)]();IP='['+ipv6+']';}catch(_0x8ef913){log(_0x6135ee(0x9f),_0x6135ee(0xf7),_0x8ef913[_0x6135ee(0x121)]),IP=_0x6135ee(0xd7);}}function _0x2f3d(_0x4025e2,_0x1ea645){const _0x5eca03=_0x5eca();return _0x2f3d=function(_0x2f3df2,_0x22f1a3){_0x2f3df2=_0x2f3df2-0x9b;let _0x41b108=_0x5eca03[_0x2f3df2];return _0x41b108;},_0x2f3d(_0x4025e2,_0x1ea645);}const server=http[_0x6135ee(0xd8)]((_0x86fab7,_0xfa7f83)=>{const _0x52fc07=_0x6135ee,_0x442286={'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':_0x52fc07(0xd6),'Access-Control-Allow-Headers':'*','Cache-Control':_0x52fc07(0xb3),'Pragma':'no-cache','Expires':'0','X-Accel-Buffering':'no','X-Padding':generatePadding(0x64,0x3e8)};if(_0x86fab7[_0x52fc07(0x112)]==='/'){_0xfa7f83['writeHead'](0xc8,{..._0x442286,'Content-Type':'text/plain'}),_0xfa7f83[_0x52fc07(0xde)](_0x52fc07(0x153));return;}if(_0x86fab7[_0x52fc07(0x112)]==='/'+SUB_PATH){const _0x72deb1=_0x52fc07(0xbb)+UUID+'@'+IP+_0x52fc07(0xae)+IP+_0x52fc07(0x155)+IP+_0x52fc07(0x14d)+SETTINGS[_0x52fc07(0xf4)]+_0x52fc07(0xef)+NAME+'-'+ISP,_0x1086a1=Buffer[_0x52fc07(0xfe)](_0x72deb1)['toString'](_0x52fc07(0x126));_0xfa7f83[_0x52fc07(0x135)](0xc8,{..._0x442286,'Content-Type':_0x52fc07(0xdf)}),_0xfa7f83['end'](_0x1086a1+'\x0a');return;}const _0x35b095=decodeURIComponent(_0x86fab7['url']),_0x5ebce5=_0x35b095[_0x52fc07(0x103)](new RegExp('^'+SETTINGS[_0x52fc07(0xf4)]+_0x52fc07(0xe4)));if(!_0x5ebce5){_0xfa7f83[_0x52fc07(0x135)](0x194,_0x442286),_0xfa7f83[_0x52fc07(0xde)]();return;}const _0x5d4d84=_0x5ebce5[0x1],_0x52b430=_0x5ebce5[0x2]?parseInt(_0x5ebce5[0x2]):null;let _0x8998ce=sessions['get'](_0x5d4d84);if(!_0x8998ce&&(_0x86fab7[_0x52fc07(0x138)]==='GET'||_0x86fab7[_0x52fc07(0x138)]===_0x52fc07(0x13c)&&_0x52b430===0x0))_0x8998ce=new Session(_0x5d4d84),sessions[_0x52fc07(0x119)](_0x5d4d84,_0x8998ce),log('info',_0x52fc07(0xc4)+_0x86fab7[_0x52fc07(0x138)]+':\x20'+_0x5d4d84),setTimeout(()=>{const _0xb3d1ab=_0x52fc07,_0x56aef4=sessions[_0xb3d1ab(0xe2)](_0x5d4d84);if(_0x56aef4&&!_0x56aef4['downstreamStarted']&&!_0x56aef4[_0xb3d1ab(0xd9)])log(_0xb3d1ab(0xdc),'Session\x20'+_0x5d4d84+_0xb3d1ab(0xaf)),_0x56aef4[_0xb3d1ab(0xec)]();else _0x56aef4&&_0x56aef4[_0xb3d1ab(0xd9)]&&!_0x56aef4[_0xb3d1ab(0x147)]&&Date[_0xb3d1ab(0xf6)]()-_0x56aef4[_0xb3d1ab(0x12e)]>SETTINGS[_0xb3d1ab(0xf8)]&&(log('warn',_0xb3d1ab(0xeb)+_0x5d4d84+'\x20timed\x20out\x20(initialized\x20but\x20no\x20GET\x20downstream)'),_0x56aef4[_0xb3d1ab(0xec)]());},SETTINGS[_0x52fc07(0xf8)]+0x1388);else{if(!_0x8998ce){log('warn',_0x52fc07(0x137)+_0x5d4d84+'\x20and\x20POST\x20seq\x20!=\x200'),_0xfa7f83[_0x52fc07(0x135)](0x194,_0x442286),_0xfa7f83['end'](_0x52fc07(0xa1));return;}}_0x8998ce[_0x52fc07(0x12e)]=Date[_0x52fc07(0xf6)]();if(_0x86fab7['method']===_0x52fc07(0xb4)&&_0x52b430===null){_0x442286['Content-Type']=_0x52fc07(0xf2),_0x442286[_0x52fc07(0xbe)]='chunked';if(_0x8998ce[_0x52fc07(0x147)]){log(_0x52fc07(0xdc),_0x52fc07(0xf9)+_0x5d4d84),_0xfa7f83['writeHead'](0x199,_0x442286),_0xfa7f83['end'](_0x52fc07(0xcb));return;}_0x8998ce[_0x52fc07(0x147)]=!![];!_0x8998ce[_0x52fc07(0x11a)](_0xfa7f83,_0x442286)&&(log(_0x52fc07(0x9f),'Failed\x20to\x20start\x20downstream\x20for\x20session:\x20'+_0x5d4d84),!_0xfa7f83['headersSent']&&(_0xfa7f83[_0x52fc07(0x135)](0x1f4,_0x442286),_0xfa7f83['end']()),_0x8998ce[_0x52fc07(0xec)]());return;}if(_0x86fab7[_0x52fc07(0x138)]===_0x52fc07(0x13c)&&_0x52b430!==null){let _0x31557a=[],_0x464feb=0x0,_0x4e5167=![];_0x86fab7['on'](_0x52fc07(0xf0),_0x21a84b=>{const _0x26fff4=_0x52fc07;_0x464feb+=_0x21a84b[_0x26fff4(0xfc)];if(_0x464feb>SETTINGS[_0x26fff4(0xa7)]){!_0x4e5167&&(_0xfa7f83['writeHead'](0x19d,_0x442286),_0xfa7f83['end'](),_0x4e5167=!![],_0x86fab7[_0x26fff4(0xc6)][_0x26fff4(0xe0)]());return;}_0x31557a[_0x26fff4(0x105)](_0x21a84b);}),_0x86fab7['on'](_0x52fc07(0xde),async()=>{const _0x1ad4a5=_0x52fc07;if(_0x4e5167)return;try{const _0x502a03=Buffer[_0x1ad4a5(0x100)](_0x31557a);log(_0x1ad4a5(0xfa),_0x1ad4a5(0xc1)+_0x5d4d84+_0x1ad4a5(0xc0)+_0x52b430+_0x1ad4a5(0x134)+_0x502a03['length']),await _0x8998ce[_0x1ad4a5(0xb2)](_0x52b430,_0x502a03),!_0x4e5167&&(_0xfa7f83['writeHead'](0xc8,_0x442286),_0x4e5167=!![]),_0xfa7f83[_0x1ad4a5(0xde)]();}catch(_0x479b75){log(_0x1ad4a5(0x9f),_0x1ad4a5(0xac)+_0x5d4d84+':\x20'+_0x479b75['message']),_0x8998ce['cleanup'](),!_0x4e5167&&(_0xfa7f83[_0x1ad4a5(0x135)](0x1f4,_0x442286),_0x4e5167=!![]),_0xfa7f83[_0x1ad4a5(0xde)]();}}),_0x86fab7['on'](_0x52fc07(0x9f),_0x35123b=>{const _0xae82dc=_0x52fc07;log(_0xae82dc(0x9f),_0xae82dc(0x118)+_0x5d4d84+'\x20seq\x20'+_0x52b430+':\x20'+_0x35123b[_0xae82dc(0x121)]),_0x8998ce['cleanup'](),!_0x4e5167&&(_0xfa7f83[_0xae82dc(0x135)](0x1f4,_0x442286),_0x4e5167=!![]),_0xfa7f83[_0xae82dc(0xde)]();});return;}_0xfa7f83[_0x52fc07(0x135)](0x195,_0x442286),_0xfa7f83[_0x52fc07(0xde)](_0x52fc07(0xe7));});server['on']('secureConnection',_0x294fec=>{const _0x46c9db=_0x6135ee;log(_0x46c9db(0xe5),_0x46c9db(0xc8)+(_0x294fec[_0x46c9db(0xe3)]||_0x46c9db(0xe6)));});function generatePadding(_0x4a22a9,_0x3a445e){const _0x4cf812=_0x6135ee,_0x58d09c=_0x4a22a9+Math[_0x4cf812(0x117)](Math[_0x4cf812(0x11c)]()*(_0x3a445e-_0x4a22a9+0x1)),_0x59b149=_0x4cf812(0xf1);let _0x2097da='';for(let _0x46069f=0x0;_0x46069f<_0x58d09c;_0x46069f++){_0x2097da+=_0x59b149[_0x4cf812(0x106)](Math[_0x4cf812(0x117)](Math['random']()*_0x59b149[_0x4cf812(0xfc)]));}return Buffer[_0x4cf812(0xfe)](_0x2097da)[_0x4cf812(0x101)](_0x4cf812(0x126));}server[_0x6135ee(0x116)]=parseInt(process[_0x6135ee(0x13d)][_0x6135ee(0x142)])||0x975e0,server['headersTimeout']=parseInt(process['env']['HEADERS_TIMEOUT'])||0x98968,server['on'](_0x6135ee(0x9f),_0x5d0a88=>{const _0x1075c6=_0x6135ee;log(_0x1075c6(0x9f),_0x1075c6(0x10b)+_0x5d0a88[_0x1075c6(0x121)]);}),server[_0x6135ee(0x115)](PORT,()=>{const _0x2e9fbb=_0x6135ee;console[_0x2e9fbb(0x140)]('Server\x20is\x20running\x20on\x20port\x20'+PORT),console[_0x2e9fbb(0x140)]('Access\x20Point:\x20'+IP),console[_0x2e9fbb(0x140)]('Subscription\x20URL:\x20/'+SUB_PATH),console[_0x2e9fbb(0x140)](_0x2e9fbb(0xcf)+SETTINGS[_0x2e9fbb(0xf4)]+_0x2e9fbb(0x10f));}),setInterval(()=>{const _0x8d9dea=_0x6135ee,_0x42cef0=Date[_0x8d9dea(0xf6)]();sessions[_0x8d9dea(0x104)]((_0x59cd7a,_0x46277d)=>{const _0x14fb99=_0x8d9dea;_0x42cef0-_0x59cd7a[_0x14fb99(0x12e)]>SETTINGS[_0x14fb99(0xf8)]*0x2&&(log(_0x14fb99(0xdc),'Session\x20'+_0x46277d+_0x14fb99(0xb7)),_0x59cd7a['cleanup']());});},SETTINGS[_0x6135ee(0xf8)]);function _0x5eca(){const _0x581df9=['New\x20secure\x20connection\x20using:\x20','1024','reset','Downstream\x20already\x20started','DOMAIN','nextSeq','NAME','VLESS\x20Path:\x20','read','invalid\x20UUID','reduce',']\x20[','1792790WXbwjt','curl\x20-s\x20--max-time\x202\x20ipv4.ip.sb','GET,\x20POST','localhost','createServer','initialized','headersSent','sub','warn','size','end','text/plain','destroy','stream','get','alpnProtocol','/([^/]+)(?:/([0-9]+))?$','debug','http/1.1','Method\x20Not\x20Allowed','bufferSize','Error\x20starting\x20downstream:\x20','UUID','Session\x20','cleanup','Remote\x20connection\x20not\x20available','getReader','&mode=packet-up#','data','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','application/octet-stream','currentStreamRes','XPATH','pipe','now','Failed\x20to\x20get\x20IP\x20address:','SESSION_TIMEOUT','Downstream\x20already\x20started\x20for\x20session\x20','info','port','length','Error\x20ending\x20currentStreamRes\x20on\x20cleanup:\x20','from','hostname','concat','toString','Transform','match','forEach','push','charAt','responseHeader','constructor','setNoDelay','uuid','Server\x20error:\x20','Connected\x20to\x20','delete','pendingBuffers','/<SESSION_ID>[/<SEQ_NUM>]','releaseLock','\x20bytes','url','\x1b[36m','CHUNK_SIZE','listen','keepAliveTimeout','floor','Request\x20error\x20for\x20POST\x20','set','startDownstream','unsupported\x20command:\x20','random','substr','MAX_BUFFERED_POSTS','value','_startDownstreamResponse','message','Initializing\x20VLESS\x20connection\x20from\x20first\x20packet','Failed\x20to\x20initialize\x20VLESS\x20connection','none','Failed\x20to\x20initialize\x20VLESS:\x20','base64','833899ea-3948-49d9-9cc8-d55d905b7338','write','parse\x20hostname\x20failed','2458398PgqcnV','TCP_KEEPALIVE','utf-8','resp','lastActivity','setKeepAlive','Process\x20packet\x20error:\x20','%2F','Too\x20many\x20buffered\x20packets','curl\x20-s\x20--max-time\x201\x20ipv6.ip.sb',',\x20size=','writeHead','Cleaning\x20up\x20session\x20','No\x20session\x20found\x20for\x20','method','read\x20vless\x20header\x20error:\x20','_writeToRemote','2HYvRci','POST','env','199684HlEhwK','24560zzCgEj','log','Starting\x20to\x20parse\x20VLESS\x20header','KEEP_ALIVE_TIMEOUT','headerSent','your_domain_here.example.com','connect','Buffered\x20packet\x20seq=','downstreamStarted','):\x20','8068332HXmAgm','not\x20enough\x20data\x20to\x20read','slice','Connection\x20failed:\x20','&path=','Client\x20connection\x20closed','header\x20length\x20too\x20short','has','close','18TRPUTl','Hello,\x20World\x0a','1386039MqVZtp','&fp=chrome&allowInsecure=1&type=xhttp&host=','socket','14hgkbWg','decode','VLESS\x20header\x20parsed:\x20','bufferedData','error','cleaned','Session\x20not\x20found\x20or\x20not\x20initialized','initializeVLESS','pendingPackets','Sending\x20VLESS\x20response\x20header\x20(','\x20before\x20initialization','TCP_NODELAY','MAX_POST_SIZE','105opQMck','11RQgTDA','createConnection','done','Failed\x20to\x20process\x20POST\x20request\x20for\x20','trim',':443?encryption=none&security=tls&sni=','\x20timed\x20out\x20(no\x20GET\x20or\x20POST\x20seq\x200\x20for\x20init)','Received\x20out\x20of\x20order\x20packet\x20seq=','LOG_LEVEL','processPacket','no-store,\x20no-cache,\x20must-revalidate,\x20proxy-revalidate','GET','connect\x20timeout','BUFFER_SIZE','\x20garbage\x20collected\x20due\x20to\x20inactivity','toISOString','VLESS\x20header\x20parsed\x20successfully','readable','vless://','vlessHeader','remote','Transfer-Encoding','Created\x20new\x20session\x20with\x20UUID:\x20','\x20seq=','Processing\x20packet:\x20uuid=','unknownISP','11848DmEMQU','Created\x20new\x20session\x20for\x20','writableEnded','connection','join'];_0x5eca=function(){return _0x581df9;};return _0x5eca();}
