const _0x56bc8c=_0x5671;(function(_0x2f6d9b,_0xbf0c55){const _0x4ed187=_0x5671,_0x436f63=_0x2f6d9b();while(!![]){try{const _0x3e547c=-parseInt(_0x4ed187(0xfc))/0x1+-parseInt(_0x4ed187(0xf9))/0x2*(-parseInt(_0x4ed187(0x120))/0x3)+-parseInt(_0x4ed187(0x123))/0x4+parseInt(_0x4ed187(0x124))/0x5*(-parseInt(_0x4ed187(0x116))/0x6)+parseInt(_0x4ed187(0x106))/0x7*(-parseInt(_0x4ed187(0xf3))/0x8)+-parseInt(_0x4ed187(0xf7))/0x9*(parseInt(_0x4ed187(0xfa))/0xa)+-parseInt(_0x4ed187(0x136))/0xb*(-parseInt(_0x4ed187(0x10b))/0xc);if(_0x3e547c===_0xbf0c55)break;else _0x436f63['push'](_0x436f63['shift']());}catch(_0xb68935){_0x436f63['push'](_0x436f63['shift']());}}}(_0x28cf,0x8498f));const net=require(_0x56bc8c(0x12c)),http=require(_0x56bc8c(0x117)),{Buffer}=require(_0x56bc8c(0x119)),{execSync}=require(_0x56bc8c(0xff)),UUID=process['env'][_0x56bc8c(0x13f)]||_0x56bc8c(0x10f),SUB_PATH=process[_0x56bc8c(0xf5)][_0x56bc8c(0x10a)]||'sub',XPATH=process[_0x56bc8c(0xf5)][_0x56bc8c(0x139)]||UUID[_0x56bc8c(0x11a)](0x0,0x8),DOMAIN=process[_0x56bc8c(0xf5)][_0x56bc8c(0x12a)]||_0x56bc8c(0x11e),NAME=process[_0x56bc8c(0xf5)]['NAME']||'Hf',PORT=process['env'][_0x56bc8c(0x100)]||0x1eb4,TCP_PORT=0x20fb,SETTINGS={[_0x56bc8c(0x13f)]:UUID,[_0x56bc8c(0x127)]:_0x56bc8c(0x11c),[_0x56bc8c(0x138)]:_0x56bc8c(0x108),['XPATH']:_0x56bc8c(0x103)+XPATH,[_0x56bc8c(0xf4)]:0x1e,[_0x56bc8c(0x115)]:0xf4240,['SESSION_TIMEOUT']:0x7530,[_0x56bc8c(0x132)]:0x400*0x400,[_0x56bc8c(0x11b)]:!![],[_0x56bc8c(0x110)]:!![]};function validate_uuid(_0x298ae2,_0x1f3930){for(let _0x4c9ae0=0x0;_0x4c9ae0<0x10;_0x4c9ae0++){if(_0x298ae2[_0x4c9ae0]!==_0x1f3930[_0x4c9ae0])return![];}return!![];}function _0x5671(_0x21bd78,_0x541937){const _0x28cf0d=_0x28cf();return _0x5671=function(_0x567120,_0x387dac){_0x567120=_0x567120-0xf0;let _0x32a067=_0x28cf0d[_0x567120];return _0x32a067;},_0x5671(_0x21bd78,_0x541937);}function concat_typed_arrays(_0x24ed38,_0x34173e){const _0xbd1259=_0x56bc8c,_0x5f5d69=new Uint8Array(_0x24ed38[_0xbd1259(0x129)]+_0x34173e['length']);return _0x5f5d69[_0xbd1259(0x111)](_0x24ed38,0x0),_0x5f5d69[_0xbd1259(0x111)](_0x34173e,_0x24ed38[_0xbd1259(0x129)]),_0x5f5d69;}async function read_atleast(_0x18d533,_0xbbb398){const _0x59791a=_0x56bc8c;let _0x981cd5=await _0x18d533['read']();if(_0x981cd5['done']&&(_0x981cd5['value']==null||_0x981cd5[_0x59791a(0x13a)]?.['length']<_0xbbb398))return{'value':new Uint8Array(0x0),'done':!![]};return _0x981cd5;}function _0x28cf(){const _0xc0b659=['MAX_POST_SIZE','36588JBlHhL','http','port','buffer','slice','TCP_NODELAY','none','createServer','jiushipipe-gemininono.hf.space','done','6LLTDHm','Unknown','toString','2778128iIbsLo','405LNaxBr','fromCharCode','header\x20length\x20too\x20short','LOG_LEVEL','HTTP\x20server\x20running\x20on\x20port\x20','length','DOMAIN','write','net','from','end','writeUInt16BE','Hello,\x20World\x0a','curl\x20-s\x20--max-time\x202\x20ipv4.ip.sb','CHUNK_SIZE','keepAliveTimeout','concat','decode','7633582bVVlbl','url','BUFFER_SIZE','XPATH','value','utf-8','writeHead','FQDN','://','UUID','text/plain','data','error','8QqVLhH','MAX_BUFFERED_POSTS','env','next','225Lxdmdn','hostname','68762wnPyGe','20660NLgpoN','push','723237IGWwKJ','log','alloc','child_process','PORT','/([^/]+)(?:/([0-9]+))?$','connect','%2F','headersTimeout','localhost','2366938NAThXL','listen','1024','&type=http&alpn=h2&path=','SUB_PATH','48RNewUr','postBuffers','trim','reduce','01388606-8378-436c-84c4-198a464b4779','TCP_KEEPALIVE','set','byteLength','unsupported\x20address\x20type','join'];_0x28cf=function(){return _0xc0b659;};return _0x28cf();}async function read_vless_header(_0x3f764f,_0xea3c4c){const _0x3d9548=_0x56bc8c,_0x5a79cf=0x1,_0x4cb757=0x2,_0x3e9cb0=0x1,_0x47f922=0x3,_0x24bba0=0x1,_0x12717a=0x4;let _0x2d33e4=_0xea3c4c;async function _0x413958(_0x3d337e){const _0x1bd21a=_0x5671;if(_0x2d33e4[_0x1bd21a(0x129)]>=_0x3d337e)return;const _0x2590af=_0x3d337e-_0x2d33e4[_0x1bd21a(0x129)],_0x12052b=await read_atleast(_0x3f764f,_0x2590af);if(_0x12052b[_0x1bd21a(0x11f)])throw new Error(_0x1bd21a(0x126));_0x2d33e4=concat_typed_arrays(_0x2d33e4,_0x12052b[_0x1bd21a(0x13a)]);}await _0x413958(_0x3e9cb0+_0x5a79cf);const _0x5709ca=_0x2d33e4[0x0];let _0x593491,_0x3c5c52=_0x3e9cb0;if(_0x5709ca===_0x24bba0)await _0x413958(_0x3c5c52+0x4+_0x4cb757),_0x593491=Array['from'](_0x2d33e4[_0x3d9548(0x11a)](_0x3c5c52,_0x3c5c52+0x4))[_0x3d9548(0x114)]('.'),_0x3c5c52+=0x4;else{if(_0x5709ca===_0x47f922){const _0x4e4d29=_0x2d33e4[_0x3c5c52];await _0x413958(_0x3c5c52+0x1+_0x4e4d29+_0x4cb757),_0x593491=new TextDecoder()[_0x3d9548(0x135)](_0x2d33e4['slice'](_0x3c5c52+0x1,_0x3c5c52+0x1+_0x4e4d29)),_0x3c5c52+=0x1+_0x4e4d29;}else{if(_0x5709ca===_0x12717a)await _0x413958(_0x3c5c52+0x10+_0x4cb757),_0x593491=_0x2d33e4[_0x3d9548(0x11a)](_0x3c5c52,_0x3c5c52+0x10)[_0x3d9548(0x10e)]((_0x5a114f,_0x3205ce,_0x43d4a6,_0x1c522b)=>_0x43d4a6%0x2?_0x5a114f[_0x3d9548(0x134)](((_0x1c522b[_0x43d4a6-0x1]<<0x8)+_0x3205ce)[_0x3d9548(0x122)](0x10)):_0x5a114f,[])[_0x3d9548(0x114)](':'),_0x3c5c52+=0x10;else throw new Error(_0x3d9548(0x113));}}const _0x5c684f=_0x2d33e4['slice'](_0x3c5c52,_0x3c5c52+_0x4cb757)['readUInt16BE'](0x0),_0x3bf347=Buffer[_0x3d9548(0xfe)](0x1+_0x4cb757+0x1+_0x593491[_0x3d9548(0x129)]+_0x4cb757);_0x3bf347[0x0]=_0x3e9cb0,_0x3bf347[_0x3d9548(0x12f)](PortMapping[_0x3d9548(0x100)],0x1),_0x3bf347[0x3]=OFFSET_TYPE[_0x3d9548(0x13d)],_0x3bf347[0x4]=_0x593491[_0x3d9548(0x129)],_0x3bf347['write'](_0x593491,0x5),_0x3bf347[_0x3d9548(0x12f)](_0x5c684f,0x5+_0x593491[_0x3d9548(0x129)]);const _0x16e8f1=_0x2d33e4[_0x3d9548(0x11a)](_0x3c5c52+_0x4cb757);return{'hostname':_0x593491,'port':_0x5c684f,'resp':_0x3bf347,'data':_0x16e8f1};}async function connect_remote(_0x28b74a,_0x1931cb){return new Promise((_0x246c8b,_0x310c39)=>{const _0x28db4d=_0x5671,_0x2a9e0a=net[_0x28db4d(0x102)]({'host':_0x28b74a,'port':_0x1931cb},()=>_0x246c8b(_0x2a9e0a));_0x2a9e0a['on'](_0x28db4d(0xf2),_0x48d713=>_0x310c39(_0x48d713));});}async function pipe_stream(_0x3ddb3b,_0x1fe7c8){const _0x18c4fc=_0x56bc8c;try{for await(const _0x5d3e35 of _0x3ddb3b){if(!_0x1fe7c8[_0x18c4fc(0x12b)](_0x5d3e35))break;}}catch(_0x46b489){}}async function handle_client(_0x549973){const _0x1cb87a=_0x56bc8c,_0xd028ce=_0x549973[Symbol['asyncIterator']]();let _0x477366;try{_0x477366=(await _0xd028ce[_0x1cb87a(0xf6)]())[_0x1cb87a(0x13a)];}catch(_0x1924df){_0x549973[_0x1cb87a(0x12e)]();return;}let _0x1c6ae1;try{_0x1c6ae1=await read_vless_header(_0xd028ce,_0x477366);}catch(_0x416924){_0x549973[_0x1cb87a(0x12e)]();return;}const _0x39cfe2=await connect_remote(_0x1c6ae1[_0x1cb87a(0xf8)],_0x1c6ae1[_0x1cb87a(0x118)]);_0x39cfe2[_0x1cb87a(0x12b)](_0x1c6ae1['resp']),_0x39cfe2[_0x1cb87a(0x12b)](_0x1c6ae1[_0x1cb87a(0xf1)]),pipe_stream(_0xd028ce,_0x39cfe2),_0x39cfe2['on'](_0x1cb87a(0xf1),_0x18d800=>{const _0x525d17=_0x1cb87a;_0x549973[_0x525d17(0x12b)](_0x18d800);}),_0x39cfe2['on'](_0x1cb87a(0x12e),()=>{const _0x1fe5af=_0x1cb87a;_0x549973[_0x1fe5af(0x12e)]();}),_0x549973['on']('end',()=>{const _0x57088f=_0x1cb87a;_0x39cfe2[_0x57088f(0x12e)]();});}async function get_public_ip(){const _0x5a92ac=_0x56bc8c;let _0x847bff=DOMAIN;if(!DOMAIN)try{_0x847bff=execSync(_0x5a92ac(0x131),{'encoding':_0x5a92ac(0x13b)})[_0x5a92ac(0x10d)]();}catch(_0x3abf8c){try{_0x847bff='['+execSync('curl\x20-s\x20--max-time\x201\x20ipv6.ip.sb',{'encoding':_0x5a92ac(0x13b)})[_0x5a92ac(0x10d)]()+']';}catch(_0x52b320){_0x847bff=_0x5a92ac(0x105);}}return _0x847bff;}((async()=>{const _0x2d988e=_0x56bc8c,_0x5ec13d=((()=>{const _0x339338=_0x5671;try{const _0x2479e2=execSync('curl\x20-s\x20--max-time\x201\x20ipapi.co/org',{'encoding':'utf-8'});return _0x2479e2[_0x339338(0x10d)]();}catch(_0x58824f){return _0x339338(0x121);}})()),_0x5f02a0=await get_public_ip(),_0x33a173=http['createServer'](async(_0x4bdf16,_0x510597)=>{const _0x289a47=_0x5671;if(_0x4bdf16[_0x289a47(0x137)]==='/'){_0x510597[_0x289a47(0x13c)](0xc8,{'Content-Type':_0x289a47(0xf0)}),_0x510597[_0x289a47(0x12e)](_0x289a47(0x130));return;}if(_0x4bdf16[_0x289a47(0x137)]==='/'+SUB_PATH){const _0x5607e5=String[_0x289a47(0x125)](0x76,0x6c,0x65,0x73,0x73)+_0x289a47(0x13e),_0x5323e2=_0x5607e5+(UUID+'@'+_0x5f02a0+':443?encryption=none&security=tls&flow=xtls-rprx-vision&fp=firefox&headerType=none&headerValue=&sni='+_0x5f02a0+_0x289a47(0x109)+SETTINGS['XPATH']+'&mode=packet-up#'+NAME+'-'+_0x5ec13d),_0x266d3a=Buffer[_0x289a47(0x12d)](_0x5323e2)['toString']('base64');_0x510597['writeHead'](0xc8,{'Content-Type':_0x289a47(0xf0)}),_0x510597[_0x289a47(0x12e)](_0x266d3a+'\x0a');return;}const _0x4e4f24=_0x4bdf16[_0x289a47(0x137)]['match'](new RegExp(XPATH+_0x289a47(0x101)));if(!_0x4e4f24){_0x510597[_0x289a47(0x13c)](0x194),_0x510597[_0x289a47(0x12e)]();return;}const _0x344f93=_0x4e4f24[0x1],_0x3e2b41=Number(_0x4e4f24[0x2]||'0'),_0x2889fa=[];let _0x75387d=0x0;for await(const _0x50e894 of _0x4bdf16){_0x2889fa[_0x289a47(0xfb)](_0x50e894),_0x75387d+=_0x50e894['length'];if(_0x75387d>SETTINGS[_0x289a47(0x115)]){_0x510597[_0x289a47(0x13c)](0x19d),_0x510597[_0x289a47(0x12e)]();return;}}const _0x1de139=Buffer[_0x289a47(0x134)](_0x2889fa)[_0x289a47(0x122)]();if(!global['postBuffers'])global['postBuffers']={};!global[_0x289a47(0x10c)][_0x344f93]&&(global['postBuffers'][_0x344f93]=[]);global[_0x289a47(0x10c)][_0x344f93][_0x289a47(0xfb)](_0x1de139);global[_0x289a47(0x10c)][_0x344f93][_0x289a47(0x129)]>SETTINGS[_0x289a47(0xf4)]&&global[_0x289a47(0x10c)][_0x344f93]['shift']();const _0x22bf06=global[_0x289a47(0x10c)][_0x344f93],_0xc6421=_0x3e2b41%_0x22bf06[_0x289a47(0x129)],_0x4f8731=_0x22bf06[_0xc6421],_0x236c44=Buffer[_0x289a47(0x12d)](Array(Buffer[_0x289a47(0x112)](_0x4f8731))['fill']('X')['join'](''))[_0x289a47(0x122)]('base64');_0x510597[_0x289a47(0x13c)](0xc8,{'Content-Type':_0x289a47(0xf0)}),_0x510597[_0x289a47(0x12e)](_0x236c44);});_0x33a173[_0x2d988e(0x133)]=0x975e0,_0x33a173[_0x2d988e(0x104)]=0x98968,_0x33a173['on'](_0x2d988e(0xf2),()=>{}),_0x33a173[_0x2d988e(0x107)](PORT,()=>{const _0x372b1c=_0x2d988e;console['log'](_0x372b1c(0x128)+PORT);});const _0x3f8c29=net[_0x2d988e(0x11d)](_0x17380d=>{handle_client([_0x17380d]);});_0x3f8c29[_0x2d988e(0x107)](TCP_PORT,()=>{const _0x58c1e8=_0x2d988e;console[_0x58c1e8(0xfd)]('TCP\x20server\x20listening\x20on\x20port\x20'+TCP_PORT);});})());
