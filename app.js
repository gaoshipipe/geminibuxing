const _0x2946d4=_0x5265;function _0x5a87(){const _0x25eb6e=['text/plain','base64','1846242TudAnH','read','%2F','&mode=packet-up#','01388606-8378-436c-84c4-198a464b4779',':443?encryption=none&security=tls&flow=xtls-rprx-vision&fp=firefox&headerType=none&headerValue=&sni=','TCP_KEEPALIVE','MAX_BUFFERED_POSTS','6076650tObdNb','end','write','203336ZkcZuS','curl\x20-s\x20--max-time\x201\x20ipapi.co/org','CHUNK_SIZE','/([^/]+)(?:/([0-9]+))?$','Server\x20is\x20running\x20on\x20port\x20','utf-8','env','next','jiushipipe-gemininono.hf.space','connect','writeHead','decode','none','slice','done','trim','from','log','createServer','unsupported\x20address\x20type','http','fill','870335PMnfzj','Hello,\x20World\x0a','match','XPATH','postBuffers','error','curl\x20-s\x20--max-time\x202\x20ipv4.ip.sb','1111484NcPmVZ','sub','Unknown','listen','shift','data','toString','writeUInt16BE','reduce','length','676327RDlaBy','MAX_POST_SIZE','LOG_LEVEL','PORT','://','BUFFER_SIZE','TCP\x20server\x20listening\x20on\x20port\x20443','1024','2735895pexQtY','byteLength','UUID','url','alloc','SUB_PATH','value','DOMAIN','fromCharCode','FQDN','join','header\x20length\x20too\x20short','keepAliveTimeout','concat','push','asyncIterator','NAME','532VgoKsA'];_0x5a87=function(){return _0x25eb6e;};return _0x5a87();}(function(_0x342c71,_0x14fdd6){const _0x4c22fc=_0x5265,_0x4ad437=_0x342c71();while(!![]){try{const _0x11955e=-parseInt(_0x4c22fc(0x1d9))/0x1+-parseInt(_0x4c22fc(0x1f5))/0x2+-parseInt(_0x4c22fc(0x1e1))/0x3+parseInt(_0x4c22fc(0x1cf))/0x4+-parseInt(_0x4c22fc(0x1c8))/0x5+parseInt(_0x4c22fc(0x1fd))/0x6+parseInt(_0x4c22fc(0x1f2))/0x7*(parseInt(_0x4c22fc(0x200))/0x8);if(_0x11955e===_0x14fdd6)break;else _0x4ad437['push'](_0x4ad437['shift']());}catch(_0x1345e9){_0x4ad437['push'](_0x4ad437['shift']());}}}(_0x5a87,0x8311a));const net=require('net'),http=require(_0x2946d4(0x1c6)),{Buffer}=require('buffer'),{execSync}=require('child_process'),UUID=process[_0x2946d4(0x206)][_0x2946d4(0x1e3)]||_0x2946d4(0x1f9),SUB_PATH=process[_0x2946d4(0x206)][_0x2946d4(0x1e6)]||_0x2946d4(0x1d0),XPATH=process[_0x2946d4(0x206)][_0x2946d4(0x1cb)]||UUID[_0x2946d4(0x20d)](0x0,0x8),DOMAIN=process[_0x2946d4(0x206)][_0x2946d4(0x1e8)]||_0x2946d4(0x208),NAME=process[_0x2946d4(0x206)][_0x2946d4(0x1f1)]||'Hf',PORT=process['env'][_0x2946d4(0x1dc)]||0x1eb4,SETTINGS={['UUID']:UUID,[_0x2946d4(0x1db)]:_0x2946d4(0x20c),[_0x2946d4(0x1de)]:_0x2946d4(0x1e0),[_0x2946d4(0x1cb)]:_0x2946d4(0x1f7)+XPATH,[_0x2946d4(0x1fc)]:0x1e,[_0x2946d4(0x1da)]:0xf4240,['SESSION_TIMEOUT']:0x7530,[_0x2946d4(0x202)]:0x400*0x400,['TCP_NODELAY']:!![],[_0x2946d4(0x1fb)]:!![]};function validate_uuid(_0x416642,_0x16ff33){for(let _0x3b9bb6=0x0;_0x3b9bb6<0x10;_0x3b9bb6++){if(_0x416642[_0x3b9bb6]!==_0x16ff33[_0x3b9bb6])return![];}return!![];}function _0x5265(_0xfd8fff,_0x56d42a){const _0x5a8784=_0x5a87();return _0x5265=function(_0x52652d,_0x45b368){_0x52652d=_0x52652d-0x1c5;let _0x596614=_0x5a8784[_0x52652d];return _0x596614;},_0x5265(_0xfd8fff,_0x56d42a);}function concat_typed_arrays(_0xeb9bfb,_0x1ddd71){const _0x5c35f7=_0x2946d4,_0x47675c=new Uint8Array(_0xeb9bfb[_0x5c35f7(0x1d8)]+_0x1ddd71['length']);return _0x47675c['set'](_0xeb9bfb,0x0),_0x47675c['set'](_0x1ddd71,_0xeb9bfb[_0x5c35f7(0x1d8)]),_0x47675c;}async function read_atleast(_0x44bca4,_0x30d580){const _0xc427be=_0x2946d4;let _0x408c07=await _0x44bca4[_0xc427be(0x1f6)]();if(_0x408c07[_0xc427be(0x20e)]&&(_0x408c07[_0xc427be(0x1e7)]==null||_0x408c07[_0xc427be(0x1e7)]?.[_0xc427be(0x1d8)]<_0x30d580))return{'value':new Uint8Array(0x0),'done':!![]};return _0x408c07;}async function read_vless_header(_0x34e232,_0x3af95e){const _0x1db00e=_0x2946d4,_0x8295e6=0x1,_0x45d4ed=0x2,_0x3e4610=0x1,_0xdbd443=0x1,_0x225113=0x3,_0x2b7e59=0x1,_0x5dff8a=0x4;let _0x122dc0=_0x3af95e,_0x41805e=_0x3af95e['length'];async function _0x1052d(_0x5b2561){const _0x44c8cf=_0x5265;if(_0x122dc0['length']>=_0x5b2561)return;const _0x37ac44=_0x5b2561-_0x122dc0['length'],_0xbc2056=await read_atleast(_0x34e232,_0x37ac44);if(_0xbc2056[_0x44c8cf(0x20e)])throw new Error(_0x44c8cf(0x1ec));_0x122dc0=concat_typed_arrays(_0x122dc0,_0xbc2056[_0x44c8cf(0x1e7)]);}await _0x1052d(_0x3e4610+_0x8295e6);const _0x946087=_0x122dc0[0x0];let _0x586a80,_0x146c9c=_0x3e4610;if(_0x946087===_0x2b7e59)await _0x1052d(_0x146c9c+0x4+_0x45d4ed),_0x586a80=Array[_0x1db00e(0x210)](_0x122dc0['slice'](_0x146c9c,_0x146c9c+0x4))[_0x1db00e(0x1eb)]('.'),_0x146c9c+=0x4;else{if(_0x946087===_0x225113){const _0x15f295=_0x122dc0[_0x146c9c];await _0x1052d(_0x146c9c+0x1+_0x15f295+_0x45d4ed),_0x586a80=new TextDecoder()[_0x1db00e(0x20b)](_0x122dc0[_0x1db00e(0x20d)](_0x146c9c+0x1,_0x146c9c+0x1+_0x15f295)),_0x146c9c+=0x1+_0x15f295;}else{if(_0x946087===_0x5dff8a)await _0x1052d(_0x146c9c+0x10+_0x45d4ed),_0x586a80=_0x122dc0[_0x1db00e(0x20d)](_0x146c9c,_0x146c9c+0x10)[_0x1db00e(0x1d7)]((_0x307496,_0x33afe1,_0x1e2c10,_0x11464f)=>_0x1e2c10%0x2?_0x307496[_0x1db00e(0x1ee)](((_0x11464f[_0x1e2c10-0x1]<<0x8)+_0x33afe1)['toString'](0x10)):_0x307496,[])[_0x1db00e(0x1eb)](':'),_0x146c9c+=0x10;else throw new Error(_0x1db00e(0x1c5));}}const _0x3e6257=_0x122dc0['slice'](_0x146c9c,_0x146c9c+_0x45d4ed)['readUInt16BE'](0x0),_0x2512a0=Buffer[_0x1db00e(0x1e5)](0x1+_0x45d4ed+0x1+_0x586a80[_0x1db00e(0x1d8)]+_0x45d4ed);_0x2512a0[0x0]=_0x3e4610,_0x2512a0['writeUInt16BE'](PortMapping[_0x1db00e(0x1dc)],0x1),_0x2512a0[0x3]=OFFSET_TYPE[_0x1db00e(0x1ea)],_0x2512a0[0x4]=_0x586a80[_0x1db00e(0x1d8)],_0x2512a0[_0x1db00e(0x1ff)](_0x586a80,0x5),_0x2512a0[_0x1db00e(0x1d6)](_0x3e6257,0x5+_0x586a80[_0x1db00e(0x1d8)]);const _0x331515=_0x122dc0[_0x1db00e(0x20d)](_0x146c9c+_0x45d4ed);return{'hostname':_0x586a80,'port':_0x3e6257,'resp':_0x2512a0,'data':_0x331515};}async function connect_remote(_0xe142f8,_0x49e38c){return new Promise((_0x2f17d8,_0x43124f)=>{const _0x518e3a=_0x5265,_0x5f0b75=net[_0x518e3a(0x209)]({'host':_0xe142f8,'port':_0x49e38c},()=>_0x2f17d8(_0x5f0b75));_0x5f0b75['on']('error',_0x105b31=>_0x43124f(_0x105b31));});}async function pipe_stream(_0x5c96f4,_0x27bec6){const _0x883f4c=_0x2946d4;try{for await(const _0x7f0a45 of _0x5c96f4){if(!_0x27bec6[_0x883f4c(0x1ff)](_0x7f0a45))break;}}catch(_0x5c410e){}}async function handle_client(_0xee225e){const _0x4da27f=_0x2946d4,_0x2ddf66=_0xee225e[Symbol[_0x4da27f(0x1f0)]]();let _0xd56a04;try{_0xd56a04=(await _0x2ddf66[_0x4da27f(0x207)]())[_0x4da27f(0x1e7)];}catch(_0x13db38){_0xee225e[_0x4da27f(0x1fe)]();return;}let _0x2df2b3;try{_0x2df2b3=await read_vless_header(_0x2ddf66,_0xd56a04);}catch(_0x280306){_0xee225e[_0x4da27f(0x1fe)]();return;}const _0x35f135=await connect_remote(_0x2df2b3['hostname'],_0x2df2b3['port']);_0x35f135[_0x4da27f(0x1ff)](_0x2df2b3['resp']),_0x35f135[_0x4da27f(0x1ff)](_0x2df2b3[_0x4da27f(0x1d4)]),pipe_stream(_0x2ddf66,_0x35f135),_0x35f135['on'](_0x4da27f(0x1d4),_0x107817=>{_0xee225e['write'](_0x107817);}),_0x35f135['on'](_0x4da27f(0x1fe),()=>{_0xee225e['end']();}),_0xee225e['on']('end',()=>{_0x35f135['end']();});}async function get_public_ip(){const _0x492433=_0x2946d4;let _0x596aff=DOMAIN;if(!DOMAIN)try{_0x596aff=execSync(_0x492433(0x1ce),{'encoding':_0x492433(0x205)})[_0x492433(0x20f)]();}catch(_0x2cec66){try{_0x596aff='['+execSync('curl\x20-s\x20--max-time\x201\x20ipv6.ip.sb',{'encoding':_0x492433(0x205)})[_0x492433(0x20f)]()+']';}catch(_0x59d42a){_0x596aff='localhost';}}return _0x596aff;}((async()=>{const _0x5dc4d7=_0x2946d4,_0x504665=((()=>{const _0x14aad9=_0x5265;try{const _0x425507=execSync(_0x14aad9(0x201),{'encoding':_0x14aad9(0x205)});return _0x425507[_0x14aad9(0x20f)]();}catch(_0x52c715){return _0x14aad9(0x1d1);}})()),_0x4bd758=await get_public_ip(),_0x5d9690=http['createServer'](async(_0x245b5d,_0x2a90b4)=>{const _0x402e1b=_0x5265;if(_0x245b5d[_0x402e1b(0x1e4)]==='/'){_0x2a90b4['writeHead'](0xc8,{'Content-Type':_0x402e1b(0x1f3)}),_0x2a90b4['end'](_0x402e1b(0x1c9));return;}if(_0x245b5d[_0x402e1b(0x1e4)]==='/'+SUB_PATH){const _0xc6c5ab=String[_0x402e1b(0x1e9)](0x76,0x6c,0x65,0x73,0x73)+_0x402e1b(0x1dd),_0x666f15=_0xc6c5ab+(UUID+'@'+_0x4bd758+_0x402e1b(0x1fa)+_0x4bd758+'&type=http&alpn=h2&path='+SETTINGS[_0x402e1b(0x1cb)]+_0x402e1b(0x1f8)+NAME+'-'+_0x504665),_0x1494a5=Buffer[_0x402e1b(0x210)](_0x666f15)['toString'](_0x402e1b(0x1f4));_0x2a90b4[_0x402e1b(0x20a)](0xc8,{'Content-Type':_0x402e1b(0x1f3)}),_0x2a90b4[_0x402e1b(0x1fe)](_0x1494a5+'\x0a');return;}const _0x2b4200=_0x245b5d['url'][_0x402e1b(0x1ca)](new RegExp(XPATH+_0x402e1b(0x203)));if(!_0x2b4200){_0x2a90b4['writeHead'](0x194),_0x2a90b4['end']();return;}const _0x5b9142=_0x2b4200[0x1],_0x1eb102=Number(_0x2b4200[0x2]||'0'),_0x4433f4=[];let _0x1c049e=0x0;for await(const _0x48442d of _0x245b5d){_0x4433f4[_0x402e1b(0x1ef)](_0x48442d),_0x1c049e+=_0x48442d[_0x402e1b(0x1d8)];if(_0x1c049e>SETTINGS[_0x402e1b(0x1da)]){_0x2a90b4[_0x402e1b(0x20a)](0x19d),_0x2a90b4[_0x402e1b(0x1fe)]();return;}}const _0x54e021=Buffer[_0x402e1b(0x1ee)](_0x4433f4)[_0x402e1b(0x1d5)]();let _0xf94c62=new Map();if(!global[_0x402e1b(0x1cc)])global[_0x402e1b(0x1cc)]={};!global[_0x402e1b(0x1cc)][_0x5b9142]&&(global[_0x402e1b(0x1cc)][_0x5b9142]=[]);global[_0x402e1b(0x1cc)][_0x5b9142][_0x402e1b(0x1ef)](_0x54e021);global['postBuffers'][_0x5b9142][_0x402e1b(0x1d8)]>SETTINGS[_0x402e1b(0x1fc)]&&global[_0x402e1b(0x1cc)][_0x5b9142][_0x402e1b(0x1d3)]();const _0x16b1b1=global[_0x402e1b(0x1cc)][_0x5b9142],_0x597a03=_0x1eb102%_0x16b1b1['length'],_0x3ac8f4=_0x16b1b1[_0x597a03],_0x276fa6=Buffer['from'](Array(Buffer[_0x402e1b(0x1e2)](_0x3ac8f4))[_0x402e1b(0x1c7)]('X')[_0x402e1b(0x1eb)](''))[_0x402e1b(0x1d5)](_0x402e1b(0x1f4));_0x2a90b4[_0x402e1b(0x20a)](0xc8,{'Content-Type':_0x402e1b(0x1f3)}),_0x2a90b4[_0x402e1b(0x1fe)](_0x276fa6);});_0x5d9690[_0x5dc4d7(0x1ed)]=0x975e0,_0x5d9690['headersTimeout']=0x98968,_0x5d9690['on'](_0x5dc4d7(0x1cd),()=>{}),_0x5d9690[_0x5dc4d7(0x1d2)](PORT,()=>{const _0x37e24f=_0x5dc4d7;console[_0x37e24f(0x211)](_0x37e24f(0x204)+PORT);});const _0x519041=net[_0x5dc4d7(0x212)](_0x1e80d2=>{handle_client([_0x1e80d2]);});_0x519041[_0x5dc4d7(0x1d2)](0x1bb,()=>{const _0x3b1506=_0x5dc4d7;console[_0x3b1506(0x211)](_0x3b1506(0x1df));});})());
